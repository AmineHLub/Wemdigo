<%= form_with(model: category, data: { turbo: false }, html: { class: "category-form", id:"category-form"}) do |form| %>
  <% if category.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(category.errors.count, "error") %> prohibited this category from being saved:</h2>
      <ul>
        <% category.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.text_field :name, required: true, placeholder: "Name" %>
  </div>

  <div>
    <p>Add a logo please</p>
    <label for="file" class="label-file">
    <p>Upload an image...</p>
    <span class="file-name">No file selected</span>
    </label>
    <%= form.file_field :cat_image, accept: "image/png, image/gif, image/jpeg", required: true, id:"file", class:"input-file" %>
  </div>
<% end %>

<script>
  document.querySelector('#file').addEventListener("change", (e) => {
  document.querySelector('.label-file > span').innerText = e.target.files[0].name;
  document.querySelector('.label-file > p').style.backgroundColor = "#5fb523";
  document.querySelector('.label-file > p').innerText = "Selected âœ“"
  })
</script>

<script>
document.querySelector('.new-edit-cat').addEventListener('click', () => {
  if ((document.querySelector('.label-file > span').innerText == 'No file selected') && 
  (document.querySelector('#category_name').value !== '')) {
    alert('select a logo first!')
  }
})
</script>